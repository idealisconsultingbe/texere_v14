<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="reception_and_release_assets" inherit_id="web.report_assets_common">
        <xpath expr="." position="inside">
            <link rel="stylesheet" type="text/css" href="/reception_and_release_management/static/src/css/report_reception_and_release.css"/>
        </xpath>
    </template>

    <template id="report_lot_reception_and_release">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-set="lang" t-value="doc.company_id.partner_id.lang"/>
                <t t-call="reception_and_release_management.report_lot_reception_and_release_document" t-lang="lang"/>
            </t>
        </t>
    </template>

    <template id="report_lot_reception_and_release_document">
        <t t-call="reception_and_release_management.reception_and_release_company_external_layout">
            <div class="page">

                <div class="col-12">

                    <table class="coa-table p-1-05 bbr-gray th-whitesmoke">
                        <tbody>
                            <tr>
                                <th width="25%">Product name</th>
                                <td width="25%"><span t-field="doc.product_id.name"/></td>
                                <th width="25%">Order form#</th>
                                <td width="25%"><span t-field="doc.purchase_id.name"/></td>
                            </tr>
                            <tr>
                                <th colspan="2">Product type</th>
                                <td colspan="2"><span t-field="doc.product_id.categ_id.name"/></td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="coa-table p-1-05 bbr-gray th-whitesmoke">
                        <tbody>
                            <tr>
                                <th style="padding: 0.2rem 0 0 0.5rem; background-color: DarkGray" colspan="4"><h2 class="fs-13-rem">Reception</h2></th>
                            </tr>
                            <tr>
                                <th width="25%">Arrival on</th>
                                <td width="25%"><span t-field="doc.arrival_date"/></td>
                                <th width="25%">Expiry date</th>
                                <td width="25%"><span t-field="doc.expiration_date"/></td>

                            </tr>
                            <tr>
                                <th>Quantity (precise units)</th>
                                <td>
                                    <t t-if="doc.product_qty &gt; 0">
                                        <span t-field="doc.product_qty"/> <span t-field="doc.product_uom_id.name"/>
                                    </t>
                                    <t t-else="">&amp;nbsp;</t>
                                </td>
                                <th>Packaging state</th>
                                <td>
                                    <t t-if="doc.packaging_state">
                                        <span t-field="doc.packaging_state"/>
                                    </t>
                                    <t t-else="">
                                        <ul class="no-marker-style">
                                            <li><input type="checkbox"/> Good state</li>
                                            <li><input type="checkbox"/> Damaged</li>
                                        </ul>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <th>Supplier</th>
                                <td><span t-field="doc.partner_id.name"/></td>
                                <th>Manufacturer</th>
                                <td>missing</td>
                            </tr>
                            <tr>
                                <th>Supplier ID#</th>
                                <td><span t-field="doc.seller_product_code"/></td>
                                <th>Supplier batch#</th>
                                <td>missing</td>
                            </tr>
                            <tr>
                                <th colspan="2">Texere Biotech ID#</th>
                                <td colspan="2"><span t-field="doc.product_id.default_code"/></td>
                            </tr>
                            <tr>
                                <th colspan="2">Specifications reference (cfr section "OP.1.1 Specifications" of the QMS)</th>
                                <td colspan="2">OP.1.1_SPE_
                                    <t t-if="doc.specification_reference">
                                        <span t-field="doc.specification_reference"/>
                                    </t>
                                    <t t-else="">
                                        ..... / .....
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <th rowspan="2">Reconciliation</th>
                                <td colspan="3" style="border-bottom: none;">
                                    <p class="m-0">To check the consistency between the delivery note and order to the supplier</p>
                                    <t t-if="doc.supplier_consistency">
                                        <input type="checkbox" checked="checked"/>&amp;nbsp;<span t-field="doc.supplier_consistency"/>
                                    </t>
                                    <t t-else="">
                                        <ul class="no-marker-style inline-style">
                                            <li><input type="checkbox"/> Consistent</li>
                                            <li> / </li>
                                            <li><input type="checkbox"/> Different</li>
                                        </ul>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" style="border-top: none;">
                                    <p class="m-0">To check the consistency of the delivery note with the delivered items</p>
                                    <t t-if="doc.items_consistency">
                                        <input type="checkbox" checked="checked"/>&amp;nbsp;<span t-field="doc.items_consistency"/>
                                    </t>
                                    <t t-else="">
                                        <ul class="no-marker-style inline-style">
                                            <li><input type="checkbox"/> Consistent</li>
                                            <li> / </li>
                                            <li><input type="checkbox"/> Different</li>
                                        </ul>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <th>Certificate of Analysis</th>
                                <td colspan="3">
                                    <p class="m-0">To attach CoA as Appendix 1</p>
                                    <t t-if="doc.form_appendix">
                                        <input type="checkbox" checked="checked"/>&amp;nbsp;<span t-field="doc.form_appendix"/>
                                    </t>
                                    <t t-else="">
                                        <ul class="no-marker-style inline-style">
                                            <li><input type="checkbox"/> Done</li>
                                            <li> / </li>
                                            <li><input type="checkbox"/> Not done*</li>
                                            <li> / </li>
                                            <li><input type="checkbox"/> Not applicable</li>
                                        </ul>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <th>Shipping conditions</th>
                                <td colspan="3">
                                    <p class="m-0">To attach shipping temperatures chart as Appendix 2 if temperature-sensitive material</p>
                                    <t t-if="doc.temperature_appendix">
                                        <input type="checkbox" checked="checked"/>&amp;nbsp;<span t-field="doc.temperature_appendix"/>
                                    </t>
                                    <t t-else="">
                                        <ul class="no-marker-style inline-style">
                                            <li><input type="checkbox"/> Done</li>
                                            <li> / </li>
                                            <li><input type="checkbox"/> Not done*</li>
                                            <li> / </li>
                                            <li><input type="checkbox"/> Not applicable</li>
                                        </ul>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <th style="font-size: 0.9rem;">Received materials conform to the specification criteria ?</th>
                                <td colspan="3">
                                    <t t-if="doc.materials_conformity">
                                        <span t-field="doc.materials_conformity"/>
                                    </t>
                                    <t t-else="">
                                        <ul class="no-marker-style inline-style">
                                            <li><input type="checkbox"/> Yes</li>
                                            <li> / </li>
                                            <li><input type="checkbox"/> No*</li>
                                            <li> / </li>
                                            <li><input type="checkbox"/> Not applicable</li>
                                        </ul>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <th>* Explanations</th>
                                <td colspan="3" style="height: 5rem;">
                                    <span t-field="doc.reception_comment"/>
                                </td>
                            </tr>
                            <tr>
                                <th rowspan="2">Reception done by</th>
                                <th class="text-center p-0">Name</th>
                                <th class="text-center p-0">Date</th>
                                <th class="text-center p-0">Signature</th>
                            </tr>
                            <tr>
                                <td class="h-35 text-center p-0"><span t-if="doc.receipt_signed_by" t-field="doc.receipt_signed_by.name"/></td>
                                <td class="h-35 text-center p-0"><span t-if="doc.receipt_signed_on" t-field="doc.receipt_signed_on"/></td>
                                <td class="h-35 text-center p-0"><img t-if="doc.receipt_signature" style="max-height: 3.5rem;" t-attf-src="data:image/png;base64,#{doc.receipt_signature}" alt="Signature"/></td>
                            </tr>
                        </tbody>
                    </table>

                    <p style="page-break-after:always;"/>

                    <table class="coa-table p-1-05 bbr-gray th-whitesmoke">
                        <tbody>
                            <tr>
                                <th style="padding: 0.2rem 0 0 0.5rem; background-color: DarkGray" colspan="4"><h2 class="fs-13-rem">Label preparation</h2></th>
                            </tr>
                            <tr>
<!--                                    <td colspan="4" style="border-bottom: none;">-->
<!--                                        <ul class="no-marker-style">-->
<!--                                            <li>-->
<!--                                                <input type="checkbox" checked="checked" t-if="doc.following_template"/>-->
<!--                                                <input type="checkbox" t-if="not doc.following_template"/>-->
<!--                                                &amp;nbsp;-->
<!--                                                To prepare n+1 labels following the template here below-->
<!--                                            </li>-->
<!--                                            <li>-->
<!--                                                Total: n+1 = <span t-if="doc.total_labels" t-field="doc.total_labels"/>-->
<!--                                                <span t-if="not doc.total_labels"> ...... </span> labels-->
<!--                                            </li>-->
<!--                                            <li class="mt-4">-->
<!--                                                <input type="checkbox" checked="checked" t-if="doc.specimen_sticked"/>-->
<!--                                                <input type="checkbox" t-if="not doc.specimen_sticked"/>-->
<!--                                                &amp;nbsp;-->
<!--                                                Stick one specimen here below-->
<!--                                            </li>-->
<!--                                        </ul>-->
<!--                                    </td>-->
                                <td colspan="4" style="border-bottom: none;">
                                    <ul class="no-marker-style">
                                        <li>
                                            <input type="checkbox"/>
                                            &amp;nbsp;
                                            To prepare n+1 labels following the template here below
                                        </li>
                                        <li>
                                            Total: n+1 = ...... labels
                                        </li>
                                        <li class="mt-4">
                                            <input type="checkbox"/>
                                            &amp;nbsp;
                                            Stick one specimen here below
                                        </li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="4" style="border-top: none;">
                                    <ul class="no-marker-style mt-8 ml-4 mb-8">
                                        <li class="mb-2">Texere ID:</li>
                                        <li class="mb-2">Expiry date:</li>
                                        <li>Storage temperature:</li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td width="25%"></td>
                                <th width="25%" class="text-center p-0">Name</th>
                                <th width="25%" class="text-center p-0">Date</th>
                                <th width="25%" class="text-center p-0">Signature</th>
                            </tr>
                            <tr>
                                <th class="h-35">Label preparation</th>
                                <td class="h-35"></td>
                                <td class="h-35"></td>
                                <td class="h-35"></td>
                            </tr>
                            <tr>
                                <th class="h-35">Double-check <small>(not required for not critical RCs)</small></th>
                                <td class="h-35"></td>
                                <td class="h-35"></td>
                                <td class="h-35"></td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="coa-table p-1-05 bbr-gray no-break-inside th-whitesmoke">
                        <tbody>
                            <tr>
                                <th style="padding: 0.2rem 0 0 0.5rem; background-color: DarkGray" colspan="4"><h2 class="fs-13-rem">Status</h2></th>
                            </tr>
                            <tr>
                                <td class="text-center v-align-middle" colspan="4">
                                    <t t-if="doc.lot_status">
                                        <p class="mb-0 mt-4"><strong t-field="doc.lot_status"/></p>
                                    </t>
                                    <t t-else="">
                                        <ul class="no-marker-style inline-style mt-4 mb-0">
                                            <li><input type="checkbox"/> <strong>Released for use</strong></li>
                                            <li> / </li>
                                            <li><input type="checkbox"/> <strong>Rejected</strong></li>
                                        </ul>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <th width="25%" class="text-center p-0">Job title</th>
                                <th width="25%" class="text-center p-0">Name</th>
                                <th width="25%" class="text-center p-0">Date</th>
                                <th width="25%" class="text-center p-0">Signature</th>
                            </tr>
                            <tr>
                                <td class="h-35 text-center p-0"><span t-if="doc.job_title" t-field="doc.job_title"/></td>
                                <td class="h-35 text-center p-0"><span t-if="doc.signed_by" t-field="doc.signed_by.name"/></td>
                                <td class="h-35 text-center p-0"><span t-if="doc.signed_on" t-field="doc.signed_on"/></td>
                                <td class="h-35 text-center p-0"><img t-if="doc.signature" style="max-height: 3.5rem;" t-attf-src="data:image/png;base64,#{doc.signature}" alt="Signature"/></td>
                            </tr>
                            <tr>
                                <th rowspan="5">Identification &amp; storage</th>
<!--                                <td colspan="3" style="border-bottom: none;">-->
<!--                                    <p class="m-0">-->
<!--                                        <t t-if="doc.products_sticked"><input type="checkbox" checked="checked"/></t>-->
<!--                                        <t t-else=""><input type="checkbox"/></t>-->
<!--                                        To stick labels on the reagents/consumables-->
<!--                                    </p>-->
<!--                                    <div class="ml-8">-->
<!--                                        <t t-if="doc.label_reconciliation">-->
<!--                                            Label reconciliation : exact number ? <span t-field="doc.label_reconciliation"/>-->
<!--                                        </t>-->
<!--                                        <t t-else="">-->
<!--                                            <ul class="no-marker-style inline-style">-->
<!--                                                <li>Label reconciliation : exact number ? </li>-->
<!--                                                <li><input type="checkbox"/> Yes</li>-->
<!--                                                <li> / </li>-->
<!--                                                <li><input type="checkbox"/> No**</li>-->
<!--                                            </ul>-->
<!--                                        </t>-->
<!--                                    </div>-->
<!--                                </td>-->
                                <td colspan="3" style="border-bottom: none;">
                                    <p class="m-0">
                                        <input type="checkbox"/>
                                        To stick labels on the reagents/consumables
                                    </p>
                                    <div class="ml-8">
                                        <ul class="no-marker-style inline-style">
                                            <li>Label reconciliation : exact number ? </li>
                                            <li><input type="checkbox"/> Yes</li>
                                            <li> / </li>
                                            <li><input type="checkbox"/> No**</li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" style="border-top: none;">
                                    <p class="m-0">
                                        <t t-if="doc.items_stored"><input type="checkbox" checked="checked"/></t>
                                        <t t-else=""><input type="checkbox"/></t>
                                        To store the item(s). Storage Location:
                                        <t t-if="doc.storage_location"><span t-field="doc.storage_location"/></t>
                                        <t t-else="">...................</t>
                                    </p>
                                    <div class="ml-8">
                                        <t t-if="doc.storage_temperature">
                                            Storage temperature: <span t-field="doc.storage_temperature"/>
                                            <t t-if="doc.manual_temperature"><span t-field="doc.manual_temperature"/></t>
                                        </t>
                                        <t t-else="">
                                            <ul class="no-marker-style inline-style">
                                                <li>Storage temperature: </li>
                                                <li><input type="checkbox"/> RT</li>
                                                <li> / </li>
                                                <li><input type="checkbox"/> 2-8°C</li>
                                                <li> / </li>
                                                <li><input type="checkbox"/> -80°c</li>
                                            </ul>
                                        </t>
                                    </div>
                                </td>
                            </tr>
                            <tr>
<!--                                <td colspan="3" style="height: 5rem;">-->
<!--                                    <strong class="underline">Comment</strong> **: <span t-field="doc.status_comment"/>-->
<!--                                </td>-->
                                <td colspan="3" style="height: 5rem;">
                                    <strong class="underline">Comment</strong> **:
                                </td>
                            </tr>
                            <tr>
                                <th width="25%" class="text-center p-0">Name</th>
                                <th width="25%" class="text-center p-0">Date</th>
                                <th width="25%" class="text-center p-0">Signature</th>
                            </tr>
                            <tr>
                                <td class="h-35">&amp;nbsp;</td>
                                <td class="h-35">&amp;nbsp;</td>
                                <td class="h-35">&amp;nbsp;</td>
                            </tr>
                            <tr>
                                <th rowspan="3">Table update</th>
<!--                                <td colspan="3">-->
<!--                                    <p class="m-0">-->
<!--                                        <t t-if="doc.table_update"><input type="checkbox" checked="checked"/></t>-->
<!--                                        <t t-else=""><input type="checkbox"/></t>-->
<!--                                        OP.1.2_TAB_002 Table for stock management for reagents and consumables-->
<!--                                    </p>-->
<!--                                </td>-->
                                <td colspan="3">
                                    <p class="m-0">
                                        <input type="checkbox"/>
                                        OP.1.2_TAB_002 Table for stock management for reagents and consumables
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <th width="25%" class="text-center p-0">Name</th>
                                <th width="25%" class="text-center p-0">Date</th>
                                <th width="25%" class="text-center p-0">Signature</th>
                            </tr>
                            <tr>
                                <td class="h-35">&amp;nbsp;</td>
                                <td class="h-35">&amp;nbsp;</td>
                                <td class="h-35">&amp;nbsp;</td>
                            </tr>
                        </tbody>
                    </table>

                </div>

            </div>
        </t>
    </template>

</odoo>
